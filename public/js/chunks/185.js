"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[185],{6185:(t,e,n)=>{n.r(e),n.d(e,{default:()=>o});const a={created:function(){var t=this;this.mGetList(),this.mGetQueue(),this.$socket.on("reloadme",(function(){t.mGetQueue()})),this.$socket.on("loadtimestamp",(function(e){t.percentage=e/t.duration*100})),this.$socket.on("taketotaldur",(function(e){t.duration=e}))},data:function(){return{header:[],list:[],header2:[],queue:[],search:"",toupload:!1,file:{name:"",content:null},uploading:!1,uploadProgress:0,openctrl:!1,percentage:0,duration:0}},methods:{mGetList:function(){var t=this;axios.get("api/play").then((function(e){0!=e.data.length?(t.list=e.data,t.header=Object.keys(e.data[0])):t.list=[]}))},mGetQueue:function(){var t=this;axios.get("api/play?mode=q").then((function(e){0!=e.data.length?(t.queue=e.data,t.header2=Object.keys(e.data[0])):t.queue=[]}))},mToQueue:function(t){var e=this;axios.post("api/play",t).finally((function(){e.$socket.emit("reload_data")}))},mUpload:function(){var t=this,e=new FormData;e.append("name",this.file.name),e.append("content",this.file.content),this.uploading=!0,axios.post("".concat(this.$url,"/api/play"),e,{onUploadProgress:function(e){var n=Math.round(100*e.loaded/e.total);t.uploadProgress=n,console.log(t.uploadProgress,"loaded",e.loaded,"total",e.total)}}).then((function(e){t.toupload=!1,t.uploading=!1,alert("Video has been added!"),t.mGetList(),t.mCloseUpload(),t.uploadProgress=0}))},mCloseUpload:function(){this.toupload=!1,this.file={name:"",content:null}},mClear:function(){var t=this;axios.delete("api/play/clear").finally((function(){t.$socket.emit("reload_data")}))},mToCancel:function(t){var e=this;axios.delete("api/play/cancel?no=".concat(t.No)).finally((function(){e.$socket.emit("reload_data")}))},mNext:function(){var t=this;axios.delete("api/play/del").finally((function(){t.$socket.emit("reload_data","next")}))},mPlay:function(){this.$socket.emit("toggleplay")},mVidDuration:function(){this.$socket.emit("setdur",this.percentage)},mFullscreen:function(){this.$socket.emit("reqfullscreen")}},computed:{cFilter:function(){var t=this;return this.search?this.list.filter((function(e){return e.Title.toUpperCase().includes(t.search.toUpperCase())})):this.list},cQueueHeader:function(){if(this.header2)return this.header2.filter((function(t){return!t.includes("Link")}))},cResizeDialog:function(){return this.$vuetify.breakpoint.xl?"15%":this.$vuetify.breakpoint.lg?"20%":this.$vuetify.breakpoint.md?"28%":this.$vuetify.breakpoint.sm?"45%":"100%"}}};const o=(0,n(4486).A)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-row",[n("v-col",{attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[n("v-card",{attrs:{color:"black"}},[n("v-card-title",[n("h1",{staticStyle:{color:"white"}},[t._v("\n                      List\n                  ")])]),t._v(" "),n("v-card-text",[n("v-row",[n("v-col",{attrs:{cols:"10"}},[n("v-text-field",{attrs:{"background-color":"white",outlined:"",dense:"",placeholder:"Search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),n("v-col",{attrs:{cols:"2"}},[n("v-btn",{on:{click:function(e){t.toupload=!0}}},[n("v-icon",[t._v("\n                                  mdi-upload\n                              ")])],1)],1)],1),t._v(" "),n("v-simple-table",{staticClass:"text-center",attrs:{"fixed-header":"",height:.62*t.$vuetify.breakpoint.height}},[n("thead",[n("tr",[t._l(t.header,(function(e,a){return n("th",{key:a,staticClass:"text-center"},[t._v(t._s(e))])})),t._v(" "),n("th",{staticClass:"text-center"},[t._v("Play")])],2)]),t._v(" "),n("tbody",t._l(t.cFilter,(function(e,a){return n("tr",{key:a},[t._l(t.header,(function(a,o){return n("td",{key:o},[t._v("\n                                  "+t._s(e[a])+"\n                              ")])})),t._v(" "),n("td",[n("v-icon",{on:{click:function(n){return t.mToQueue(e)}}},[t._v("\n                                      mdi-play\n                                  ")])],1)],2)})),0)])],1)],1)],1),t._v(" "),n("v-col",{attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[n("v-card",{attrs:{color:"black"}},[n("v-card-title",[n("h1",{staticStyle:{color:"white"}},[t._v("\n                      Queue\n                  ")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{on:{click:function(e){t.openctrl=!0}}},[n("v-icon",[t._v("\n                          mdi-remote\n                      ")])],1)],1),t._v(" "),n("v-card-text",[n("v-simple-table",{staticClass:"text-center",attrs:{"fixed-header":"",height:.7*t.$vuetify.breakpoint.height}},[0!=t.queue.length?n("thead",[n("tr",[t._l(t.cQueueHeader,(function(e,a){return n("th",{key:a,staticClass:"text-center"},[t._v(t._s(e))])})),t._v(" "),n("th",{staticClass:"text-center"},[t._v("Cancel")])],2)]):t._e(),t._v(" "),n("tbody",t._l(t.queue,(function(e,a){return n("tr",{key:a},[t._l(t.cQueueHeader,(function(a,o){return n("td",{key:o},[t._v("\n                                  "+t._s(e[a])+"\n                              ")])})),t._v(" "),n("td",[0!=a?n("v-icon",{on:{click:function(n){return t.mToCancel(e)}}},[t._v("\n                                      mdi-close\n                                  ")]):n("b",[t._v("Playing")])],1)],2)})),0)])],1)],1)],1)],1),t._v(" "),n("v-dialog",{attrs:{persistent:"","max-width":t.cResizeDialog},model:{value:t.openctrl,callback:function(e){t.openctrl=e},expression:"openctrl"}},[n("v-card",{staticClass:"text-center",attrs:{color:"black"}},[n("v-card-title",[n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.percentage,expression:"percentage"}],staticStyle:{width:"150px"},attrs:{type:"range",min:"0",max:"100",step:"1"},domProps:{value:t.percentage},on:{input:t.mVidDuration,__r:function(e){t.percentage=e.target.value}}})]),t._v(" "),n("v-icon",{attrs:{color:"white"},on:{click:t.mFullscreen}},[t._v("\n                  mdi-fullscreen\n              ")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-icon",{attrs:{color:"red"},on:{click:function(e){t.openctrl=!1}}},[t._v("\n                  mdi-close\n              ")])],1),t._v(" "),n("v-card-text",[n("v-btn",{on:{click:t.mPlay}},[n("v-icon",[t._v("\n                      mdi-play-pause\n                  ")])],1),t._v(" "),t.queue.length>1?n("v-btn",{staticClass:"ml-1",on:{click:t.mNext}},[n("v-icon",[t._v("\n                      mdi-skip-next\n                  ")])],1):t._e(),t._v(" "),0!=t.queue.length?n("v-btn",{staticClass:"ml-1",on:{click:t.mClear}},[n("v-icon",[t._v("\n                      mdi-stop\n                  ")])],1):t._e()],1)],1)],1),t._v(" "),n("v-dialog",{attrs:{persistent:"","max-width":t.cResizeDialog},model:{value:t.toupload,callback:function(e){t.toupload=e},expression:"toupload"}},[n("v-card",{attrs:{color:"black"}},[n("v-card-title",[n("h2",{staticStyle:{color:"white"}},[t._v("\n                  Upload\n              ")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-icon",{attrs:{color:"red"},on:{click:t.mCloseUpload}},[t._v("mdi-close")])],1),t._v(" "),n("v-card-text",[n("v-text-field",{attrs:{dense:"",outlined:"","background-color":"white",placeholder:"Title"},model:{value:t.file.name,callback:function(e){t.$set(t.file,"name",e)},expression:"file.name"}}),t._v(" "),n("v-file-input",{staticClass:"mt-n4",attrs:{dense:"",outlined:"","background-color":"white",placeholder:"attach file here..."},model:{value:t.file.content,callback:function(e){t.$set(t.file,"content",e)},expression:"file.content"}}),t._v(" "),""!=t.file.name&&null!=t.file.content?n("v-btn",{staticClass:"mt-n4",attrs:{block:""},on:{click:function(e){!t.uploading&&t.mUpload()}}},[1==t.uploading?n("v-progress-circular",{attrs:{color:"primary",rotate:360,value:t.uploadProgress}},[t._v(t._s(t.uploadProgress)+"%")]):n("v-icon",[t._v("\n                      mdi-upload\n                  ")])],1):t._e()],1)],1)],1)],1)}),[],!1,null,null,null).exports}}]);