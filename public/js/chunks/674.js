"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[674],{9674:(t,e,a)=>{a.r(e),a.d(e,{default:()=>o});const n={created:function(){var t=this;this.mGetList(),this.mGetQueue(),this.$socket.emit("reqtotaldur"),this.$socket.on("reloadme",(function(){t.mGetQueue()})),this.$socket.on("loadtimestamp",(function(e){t.percentage=e/t.duration*100})),this.$socket.on("taketotaldur",(function(e){t.duration=e}))},data:function(){return{header:[],list:[],header2:[],queue:[],search:"",toupload:!1,file:null,uploading:!1,uploadProgress:0,openctrl:!1,percentage:0,duration:0}},methods:{mGetList:function(){var t=this;axios.get("api/play").then((function(e){0!=e.data.length?(t.list=e.data,t.header=Object.keys(e.data[0])):t.list=[]}))},mGetQueue:function(){var t=this;axios.get("api/play?mode=q").then((function(e){0!=e.data.length?(t.queue=e.data,t.header2=Object.keys(e.data[0])):t.queue=[]}))},mToQueue:function(t){var e=this;axios.post("api/play",t).finally((function(){e.$socket.emit("reload_data")}))},mUpload:function(){var t=this,e=new FormData;e.append("content",this.file),this.uploading=!0,axios.post("".concat(this.$url,"/api/play"),e,{onUploadProgress:function(e){var a=Math.round(100*e.loaded/e.total);t.uploadProgress=a,console.log(t.uploadProgress,"loaded",e.loaded,"total",e.total)}}).then((function(e){t.toupload=!1,t.uploading=!1,alert("Video has been added!"),t.mGetList(),t.mCloseUpload(),t.uploadProgress=0}))},mCloseUpload:function(){this.toupload=!1,this.file=null},mClear:function(){var t=this;axios.delete("api/play/clear").finally((function(){t.$socket.emit("reload_data")}))},mToCancel:function(t){var e=this;axios.delete("api/play/cancel?no=".concat(t.No)).finally((function(){e.$socket.emit("reload_data")}))},mNext:function(){var t=this;axios.delete("api/play/del").finally((function(){t.$socket.emit("reload_data","next")}))},mPlay:function(){this.$socket.emit("toggleplay")},mVidDuration:function(){this.$socket.emit("setdur",this.percentage)},mFullscreen:function(){this.$socket.emit("reqfullscreen")}},computed:{cFilter:function(){var t=this;return this.search?this.list.filter((function(e){return e.Title.toUpperCase().includes(t.search.toUpperCase())})):this.list},cResizeDialog:function(){return this.$vuetify.breakpoint.xl?"15%":this.$vuetify.breakpoint.lg?"20%":this.$vuetify.breakpoint.md?"28%":this.$vuetify.breakpoint.sm?"45%":"100%"}}};const o=(0,a(4486).A)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",[a("v-col",{attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[a("v-card",{attrs:{color:"black"}},[a("v-card-title",[a("h1",{staticStyle:{color:"white"}},[t._v("\n                      List\n                  ")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{on:{click:function(e){t.toupload=!0}}},[a("v-icon",[t._v("\n                          mdi-upload\n                      ")])],1)],1),t._v(" "),a("v-card-text",[a("v-text-field",{attrs:{"background-color":"white",outlined:"",dense:"",placeholder:"Search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),a("v-simple-table",{staticClass:"text-center",attrs:{"fixed-header":"",height:.62*t.$vuetify.breakpoint.height}},[a("thead",[a("tr",[t._l(t.header,(function(e,n){return a("th",{key:n,staticClass:"text-center"},[t._v(t._s(e))])})),t._v(" "),a("th",{staticClass:"text-center"},[t._v("Play")])],2)]),t._v(" "),a("tbody",t._l(t.cFilter,(function(e,n){return a("tr",{key:n},[t._l(t.header,(function(n,o){return a("td",{key:o},[t._v("\n                                  "+t._s(e[n])+"\n                              ")])})),t._v(" "),a("td",[a("v-icon",{on:{click:function(a){return t.mToQueue(e)}}},[t._v("\n                                      mdi-play\n                                  ")])],1)],2)})),0)])],1)],1)],1),t._v(" "),a("v-col",{attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[a("v-card",{attrs:{color:"black"}},[a("v-card-title",[a("h1",{staticStyle:{color:"white"}},[t._v("\n                      Queue\n                  ")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{on:{click:function(e){t.openctrl=!0}}},[a("v-icon",[t._v("\n                          mdi-remote\n                      ")])],1)],1),t._v(" "),a("v-card-text",[a("v-simple-table",{staticClass:"text-center",attrs:{"fixed-header":"",height:.7*t.$vuetify.breakpoint.height}},[0!=t.queue.length?a("thead",[a("tr",[t._l(t.header2,(function(e,n){return a("th",{key:n,staticClass:"text-center"},[t._v(t._s(e))])})),t._v(" "),a("th",{staticClass:"text-center"},[t._v("Cancel")])],2)]):t._e(),t._v(" "),a("tbody",t._l(t.queue,(function(e,n){return a("tr",{key:n},[t._l(t.header2,(function(n,o){return a("td",{key:o},[t._v("\n                                  "+t._s(e[n])+"\n                              ")])})),t._v(" "),a("td",[0!=n?a("v-icon",{on:{click:function(a){return t.mToCancel(e)}}},[t._v("\n                                      mdi-close\n                                  ")]):a("b",[t._v("Playing")])],1)],2)})),0)])],1)],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":t.cResizeDialog},model:{value:t.openctrl,callback:function(e){t.openctrl=e},expression:"openctrl"}},[a("v-card",{staticClass:"text-center",attrs:{color:"black"}},[a("v-card-title",[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.percentage,expression:"percentage"}],staticStyle:{width:"150px"},attrs:{type:"range",min:"0",max:"100",step:"1"},domProps:{value:t.percentage},on:{input:t.mVidDuration,__r:function(e){t.percentage=e.target.value}}})]),t._v(" "),a("v-icon",{attrs:{color:"white"},on:{click:t.mFullscreen}},[t._v("\n                  mdi-fullscreen\n              ")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-icon",{attrs:{color:"red"},on:{click:function(e){t.openctrl=!1}}},[t._v("\n                  mdi-close\n              ")])],1),t._v(" "),a("v-card-text",[a("v-btn",{on:{click:t.mPlay}},[a("v-icon",[t._v("\n                      mdi-play-pause\n                  ")])],1),t._v(" "),t.queue.length>1?a("v-btn",{staticClass:"ml-1",on:{click:t.mNext}},[a("v-icon",[t._v("\n                      mdi-skip-next\n                  ")])],1):t._e(),t._v(" "),0!=t.queue.length?a("v-btn",{staticClass:"ml-1",on:{click:t.mClear}},[a("v-icon",[t._v("\n                      mdi-stop\n                  ")])],1):t._e()],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":t.cResizeDialog},model:{value:t.toupload,callback:function(e){t.toupload=e},expression:"toupload"}},[a("v-card",{attrs:{color:"black"}},[a("v-card-title",[a("h2",{staticStyle:{color:"white"}},[t._v("\n                  Upload\n              ")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-icon",{attrs:{color:"red"},on:{click:t.mCloseUpload}},[t._v("mdi-close")])],1),t._v(" "),a("v-card-text",[a("v-file-input",{attrs:{dense:"",outlined:"","background-color":"white",placeholder:"attach file here..."},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}}),t._v(" "),null!=t.file?a("v-btn",{staticClass:"mt-n4",attrs:{block:""},on:{click:function(e){!t.uploading&&t.mUpload()}}},[1==t.uploading?a("v-progress-circular",{attrs:{color:"primary",rotate:360,value:t.uploadProgress}},[t._v(t._s(t.uploadProgress)+"%")]):a("v-icon",[t._v("\n                      mdi-upload\n                  ")])],1):t._e()],1)],1)],1)],1)}),[],!1,null,null,null).exports}}]);